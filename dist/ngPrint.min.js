var ngPrint=angular.module("ngPrint",[]);
ngPrint.factory("pdfPrinter",["$q","$timeout",function(t){"use strict";var e=function(){var e=this,r=function(t,e){if(e=parseInt(e,10)||0,!e)return t;var r=document.createElement("canvas"),n=r.getContext("2d");return r.height=t.height-e,r.width=t.width,Pixastic.process(t,"crop",{rect:{left:0,top:e,width:t.width,height:t.height-e}},function(t){n.drawImage(t,0,0,t.width,t.height,0,0,t.width,t.height)}),r},n=function(t,e,n,i){for(var a=new jsPDF(e,n,i),h=a.internal,o=h.pageSize,d=h.scaleFactor,c=o.width,g=o.height,u=0,f=t.height,s=t.width/(c*d),w=0;f>u&&15>w;){var m=r(t,u),v=Math.random().toString(35);a.addImage(m,0,0,c,0,"png",v,"SLOW"),u+=g*d*s,f>u&&a.addPage(),w+=1}return a};e.generatePdfFromElement=function(e,r,i,a){var h=t.defer();return html2canvas(e,{onrendered:function(t){var e=n(t,r,i,a);h.resolve(e)}}),h.promise}},r=new e;return r}]);
ngPrint.directive("ngPrintButton",["$window","pdfPrinter",function(t,n){"use strict";return{restrict:"AC",require:"^ngPrintable",scope:{printWholePage:"&?",saveAs:"@?"},link:function(e,i,r,a){var o=function(t){return{orientation:t[0].attributes.orientation?t[0].attributes.orientation.value:"p",unit:t[0].attributes.unit?t[0].attributes.unit.value:"pt",format:t[0].attributes.format?t[0].attributes.format.value:"a4"}};e.print=function(){var i;if(e.printWholePage()?i=t.document.body:a&&(i=a.getElement()),!i)throw new SyntaxError("No template element provided. Try using ngPrintable directive.");var r=o(i),u=n.generatePdfFromElement(i,r.orientation,r.unit,r.format);u.then(function(t){e.saveAs?t.save(e.saveAs):t.output("dataurlnewwindow"),t=null})},i.on("click",function(){e.print()})}}}]);
ngPrint.directive("ngPrintable",[function(){"use strict";return{restrict:"A",scope:{orientation:"@?",unit:"@?",format:"@?"},link:function(t,n){t.element=n},controller:function(t){this.getElement=function(){return t.element}}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5nUHJpbnQtbW9kdWxlLmpzIiwicGRmUHJpbnRlci1zZXJ2aWNlLmpzIiwiY29tcG9uZW50cy9kaXJlY3RpdmVzL25nUHJpbnRCdXR0b24vbmdQcmludEJ1dHRvbi1kaXJlY3RpdmUuanMiLCJjb21wb25lbnRzL2RpcmVjdGl2ZXMvbmdQcmludGFibGUvbmdQcmludGFibGUtZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbIm5nUHJpbnQiLCJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsIiRxIiwiUGRmUHJpbnRlciIsInNlbGYiLCJ0aGlzIiwiY2FudmFzU2hpZnRJbWFnZSIsIm9sZENhbnZhcyIsInNoaWZ0QW10IiwicGFyc2VJbnQiLCJuZXdDYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiaGVpZ2h0Iiwid2lkdGgiLCJQaXhhc3RpYyIsInByb2Nlc3MiLCJyZWN0IiwibGVmdCIsInRvcCIsImRyYXdJbWFnZSIsImdlbmVyYXRlUGRmRnJvbUNhbnZhcyIsImNhbnZhcyIsIm9yaWVudGF0aW9uIiwidW5pdCIsImZvcm1hdCIsInBkZiIsImpzUERGIiwicGRmSW50ZXJuYWxzIiwiaW50ZXJuYWwiLCJwZGZQYWdlU2l6ZSIsInBhZ2VTaXplIiwicGRmU2NhbGVGYWN0b3IiLCJzY2FsZUZhY3RvciIsInBkZlBhZ2VXaWR0aCIsInBkZlBhZ2VIZWlnaHQiLCJ0b3RhbFBkZkhlaWdodCIsImh0bWxQYWdlSGVpZ2h0IiwiaHRtbFNjYWxlRmFjdG9yIiwic2FmZXR5TmV0IiwiYWxpYXMiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJhZGRJbWFnZSIsImFkZFBhZ2UiLCJnZW5lcmF0ZVBkZkZyb21FbGVtZW50IiwiZWxlbWVudCIsImRlZmVycmVkIiwiZGVmZXIiLCJodG1sMmNhbnZhcyIsIm9ucmVuZGVyZWQiLCJyZXNvbHZlIiwicHJvbWlzZSIsImluc3QiLCJkaXJlY3RpdmUiLCIkd2luZG93IiwicGRmUHJpbnRlciIsInJlc3RyaWN0IiwicmVxdWlyZSIsInNjb3BlIiwicHJpbnRXaG9sZVBhZ2UiLCJzYXZlQXMiLCJsaW5rIiwiJHNjb3BlIiwiYXR0ciIsIm5nUHJpbnRhYmxlQ29udHJvbGxlciIsImdldENvbmZpZ0F0dHJpYnV0ZXMiLCJhdHRyaWJ1dGVzIiwidmFsdWUiLCJwcmludCIsImJvZHkiLCJnZXRFbGVtZW50IiwiU3ludGF4RXJyb3IiLCJjb25maWciLCJ0aGVuIiwic2F2ZSIsIm91dHB1dCIsIm9uIiwiY29udHJvbGxlciJdLCJtYXBwaW5ncyI6IkFBRUEsR0FBSUEsU0FBVUMsUUFBUUMsT0FBTztBQ0E3QkYsUUFBUUcsUUFBUSxjQUFlLEtBQU0sV0FBWSxTQUFVQyxHQUN2RCxZQUVILElBQUlDLEdBQWEsV0FDaEIsR0FBSUMsR0FBT0MsS0FDREMsRUFBbUIsU0FBVUMsRUFBV0MsR0FFcEMsR0FEQUEsRUFBV0MsU0FBU0QsRUFBVSxLQUFPLEdBQ2hDQSxFQUFZLE1BQU9ELEVBRXhCLElBQUlHLEdBQVlDLFNBQVNDLGNBQWMsVUFDbkNDLEVBQU1ILEVBQVVJLFdBQVcsS0FTL0IsT0FQQUosR0FBVUssT0FBU1IsRUFBVVEsT0FBU1AsRUFDdENFLEVBQVVNLE1BQVFULEVBQVVTLE1BRTVCQyxTQUFTQyxRQUFRWCxFQUFXLFFBQVNZLE1BQU9DLEtBQU0sRUFBR0MsSUFBS2IsRUFBVVEsTUFBT1QsRUFBVVMsTUFBT0QsT0FBU1IsRUFBVVEsT0FBU1AsSUFBYSxTQUFVRSxHQUMzSUcsRUFBSVMsVUFBVVosRUFBVyxFQUFHLEVBQUdBLEVBQVVNLE1BQU9OLEVBQVVLLE9BQVEsRUFBRyxFQUFHTCxFQUFVTSxNQUFPTixFQUFVSyxVQUdoR0wsR0FZWGEsRUFBd0IsU0FBVUMsRUFBUUMsRUFBYUMsRUFBTUMsR0FZekQsSUFYQSxHQUFJQyxHQUFNLEdBQUlDLE9BQU1KLEVBQWFDLEVBQU1DLEdBQ25DRyxFQUFlRixFQUFJRyxTQUNuQkMsRUFBY0YsRUFBYUcsU0FDM0JDLEVBQWlCSixFQUFhSyxZQUM5QkMsRUFBZUosRUFBWWhCLE1BQzNCcUIsRUFBZ0JMLEVBQVlqQixPQUM1QnVCLEVBQWlCLEVBQ2pCQyxFQUFpQmYsRUFBT1QsT0FDeEJ5QixFQUFrQmhCLEVBQU9SLE9BQVNvQixFQUFlRixHQUNqRE8sRUFBWSxFQUVRRixFQUFqQkQsR0FBK0MsR0FBWkcsR0FBZ0IsQ0FDdEQsR0FBSS9CLEdBQVlKLEVBQWlCa0IsRUFBUWMsR0FDckNJLEVBQVFDLEtBQUtDLFNBQVNDLFNBQVMsR0FFbkNqQixHQUFJa0IsU0FBU3BDLEVBQVcsRUFBRyxFQUFHMEIsRUFBYyxFQUFHLE1BQU9NLEVBQU8sUUFFN0RKLEdBQW1CRCxFQUFnQkgsRUFBaUJNLEVBRS9CRCxFQUFqQkQsR0FDQVYsRUFBSW1CLFVBRVJOLEdBQWEsRUFHakIsTUFBT2IsR0FHbEJ4QixHQUFLNEMsdUJBQXlCLFNBQVVDLEVBQVN4QixFQUFhQyxFQUFNQyxHQUM3RCxHQUFJdUIsR0FBV2hELEVBQUdpRCxPQVNsQixPQVBBQyxhQUFZSCxHQUNSSSxXQUFZLFNBQVU3QixHQUNsQixHQUFJSSxHQUFNTCxFQUFzQkMsRUFBUUMsRUFBYUMsRUFBTUMsRUFDM0R1QixHQUFTSSxRQUFRMUIsTUFJbEJzQixFQUFTSyxVQUlwQkMsRUFBTyxHQUFJckQsRUFFbEIsT0FBT3FEO0FDM0VSMUQsUUFBUTJELFVBQVUsaUJBQWtCLFVBQVcsYUFBYyxTQUFVQyxFQUFTQyxHQUM1RSxZQUVILFFBQ0NDLFNBQVUsS0FDVkMsUUFBUyxlQUNUQyxPQUNDQyxlQUFnQixLQUNQQyxPQUFRLE1BRWxCQyxLQUFNLFNBQVVDLEVBQVFqQixFQUFTa0IsRUFBTUMsR0FDdEMsR0FBSUMsR0FBc0IsU0FBVXBCLEdBQ25DLE9BQ0N4QixZQUFhd0IsRUFBUSxHQUFHcUIsV0FBd0IsWUFBSXJCLEVBQVEsR0FBR3FCLFdBQXdCLFlBQUVDLE1BQVEsSUFDakc3QyxLQUFNdUIsRUFBUSxHQUFHcUIsV0FBaUIsS0FBSXJCLEVBQVEsR0FBR3FCLFdBQWlCLEtBQUVDLE1BQVEsS0FDNUU1QyxPQUFRc0IsRUFBUSxHQUFHcUIsV0FBbUIsT0FBSXJCLEVBQVEsR0FBR3FCLFdBQW1CLE9BQUVDLE1BQVEsTUFJcEZMLEdBQU9NLE1BQVEsV0FDZCxHQUFJdkIsRUFRSixJQU5JaUIsRUFBT0gsaUJBQ1ZkLEVBQVVTLEVBQVEvQyxTQUFTOEQsS0FDakJMLElBQ1ZuQixFQUFVbUIsRUFBc0JNLGVBRzdCekIsRUFjSCxLQUFNLElBQUkwQixhQUFZLGlFQWJ0QixJQUFJQyxHQUFTUCxFQUFvQnBCLEdBQzdCTSxFQUFVSSxFQUFXWCx1QkFBdUJDLEVBQVMyQixFQUFPbkQsWUFBYW1ELEVBQU9sRCxLQUFNa0QsRUFBT2pELE9BRWxGNEIsR0FBUXNCLEtBQUssU0FBVWpELEdBQ2hCc0MsRUFBT0YsT0FDTnBDLEVBQUlrRCxLQUFLWixFQUFPRixRQUVoQnBDLEVBQUltRCxPQUFPLG9CQUdmbkQsRUFBTSxRQU8zQnFCLEVBQVErQixHQUFHLFFBQVMsV0FDUGQsRUFBT007QUNoRHZCMUUsUUFBUTJELFVBQVUsZUFBZ0IsV0FDOUIsWUFFSCxRQUNDRyxTQUFVLElBQ0pFLE9BQ0lyQyxZQUFhLEtBQ2JDLEtBQU0sS0FDTkMsT0FBUSxNQUVsQnNDLEtBQU0sU0FBVUMsRUFBUWpCLEdBQ3ZCaUIsRUFBT2pCLFFBQVVBLEdBRVpnQyxXQUFZLFNBQVVmLEdBQ2xCN0QsS0FBS3FFLFdBQWEsV0FDZCxNQUFPUixHQUFPakIiLCJmaWxlIjoibmdQcmludC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmdsb2JhbCBhbmd1bGFyICovXG5cbnZhciBuZ1ByaW50ID0gYW5ndWxhci5tb2R1bGUoJ25nUHJpbnQnLCBbXSk7IiwiLypnbG9iYWwgbmdQcmludCwgUGl4YXN0aWMsIGpzUERGLCBodG1sMmNhbnZhcyAqL1xuXG5uZ1ByaW50LmZhY3RvcnkoJ3BkZlByaW50ZXInLCBbJyRxJywgJyR0aW1lb3V0JywgZnVuY3Rpb24gKCRxLCAkdGltZW91dCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcblx0dmFyIFBkZlByaW50ZXIgPSBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHNlbGYgPSB0aGlzLFxuICAgICAgICAgICAgY2FudmFzU2hpZnRJbWFnZSA9IGZ1bmN0aW9uIChvbGRDYW52YXMsIHNoaWZ0QW10KSB7XG4gICAgICAgICAgICAgICAgc2hpZnRBbXQgPSBwYXJzZUludChzaGlmdEFtdCwgMTApIHx8IDA7XG4gICAgICAgICAgICAgICAgaWYgKCFzaGlmdEFtdCkgeyByZXR1cm4gb2xkQ2FudmFzOyB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbmV3Q2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyksXG4gICAgICAgICAgICAgICAgICAgIGN0eCA9IG5ld0NhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuXG4gICAgICAgICAgICAgICAgbmV3Q2FudmFzLmhlaWdodCA9IG9sZENhbnZhcy5oZWlnaHQgLSBzaGlmdEFtdDtcbiAgICAgICAgICAgICAgICBuZXdDYW52YXMud2lkdGggPSBvbGRDYW52YXMud2lkdGg7XG5cbiAgICAgICAgICAgICAgICBQaXhhc3RpYy5wcm9jZXNzKG9sZENhbnZhcywgXCJjcm9wXCIsIHtyZWN0OiB7bGVmdDogMCwgdG9wOiBzaGlmdEFtdCwgd2lkdGg6IG9sZENhbnZhcy53aWR0aCwgaGVpZ2h0OiAob2xkQ2FudmFzLmhlaWdodCAtIHNoaWZ0QW10KX19LCBmdW5jdGlvbiAobmV3Q2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UobmV3Q2FudmFzLCAwLCAwLCBuZXdDYW52YXMud2lkdGgsIG5ld0NhbnZhcy5oZWlnaHQsIDAsIDAsIG5ld0NhbnZhcy53aWR0aCwgbmV3Q2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3Q2FudmFzO1xuICAgICAgICAgICAgfSxcblx0ICAgIFxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBDcmVhdGVzIG5ldyBqc1BERiBkb2N1bWVudCBvYmplY3QgaW5zdGFuY2UuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogQHBhcmFtIG9yaWVudGF0aW9uIE9uZSBvZiBcInBvcnRyYWl0XCIgb3IgXCJsYW5kc2NhcGVcIiAob3Igc2hvcnRjdXRzIFwicFwiIChEZWZhdWx0KSwgXCJsXCIpXG4gICAgICAgICAgICAgKiBAcGFyYW0gdW5pdCAgICAgICAgTWVhc3VyZW1lbnQgdW5pdCB0byBiZSB1c2VkIHdoZW4gY29vcmRpbmF0ZXMgYXJlIHNwZWNpZmllZC5cbiAgICAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICBPbmUgb2YgXCJwdFwiIChwb2ludHMpLCBcIm1tXCIgKERlZmF1bHQpLCBcImNtXCIsIFwiaW5cIlxuICAgICAgICAgICAgICogQHBhcmFtIGZvcm1hdCAgICAgIE9uZSBvZiAncGFnZUZvcm1hdHMnIGFzIHZpc2libGUgaW4ganNQREYgZG9jcywgZGVmYXVsdDogYTRcbiAgICAgICAgICAgICAqIEByZXR1cm5zIHtqc1BERn1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZ2VuZXJhdGVQZGZGcm9tQ2FudmFzID0gZnVuY3Rpb24gKGNhbnZhcywgb3JpZW50YXRpb24sIHVuaXQsIGZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHZhciBwZGYgPSBuZXcganNQREYob3JpZW50YXRpb24sIHVuaXQsIGZvcm1hdCksXG4gICAgICAgICAgICAgICAgICAgIHBkZkludGVybmFscyA9IHBkZi5pbnRlcm5hbCxcbiAgICAgICAgICAgICAgICAgICAgcGRmUGFnZVNpemUgPSBwZGZJbnRlcm5hbHMucGFnZVNpemUsXG4gICAgICAgICAgICAgICAgICAgIHBkZlNjYWxlRmFjdG9yID0gcGRmSW50ZXJuYWxzLnNjYWxlRmFjdG9yLFxuICAgICAgICAgICAgICAgICAgICBwZGZQYWdlV2lkdGggPSBwZGZQYWdlU2l6ZS53aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgcGRmUGFnZUhlaWdodCA9IHBkZlBhZ2VTaXplLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxQZGZIZWlnaHQgPSAwLFxuICAgICAgICAgICAgICAgICAgICBodG1sUGFnZUhlaWdodCA9IGNhbnZhcy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIGh0bWxTY2FsZUZhY3RvciA9IGNhbnZhcy53aWR0aCAvIChwZGZQYWdlV2lkdGggKiBwZGZTY2FsZUZhY3RvciksXG4gICAgICAgICAgICAgICAgICAgIHNhZmV0eU5ldCA9IDA7XG5cbiAgICAgICAgICAgICAgICB3aGlsZSAodG90YWxQZGZIZWlnaHQgPCBodG1sUGFnZUhlaWdodCAmJiBzYWZldHlOZXQgPCAxNSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3Q2FudmFzID0gY2FudmFzU2hpZnRJbWFnZShjYW52YXMsIHRvdGFsUGRmSGVpZ2h0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWFzID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBwZGYuYWRkSW1hZ2UobmV3Q2FudmFzLCAwLCAwLCBwZGZQYWdlV2lkdGgsIDAsICdwbmcnLCBhbGlhcywgJ1NMT1cnKTtcblxuICAgICAgICAgICAgICAgICAgICB0b3RhbFBkZkhlaWdodCArPSAocGRmUGFnZUhlaWdodCAqIHBkZlNjYWxlRmFjdG9yICogaHRtbFNjYWxlRmFjdG9yKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAodG90YWxQZGZIZWlnaHQgPCBodG1sUGFnZUhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGRmLmFkZFBhZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzYWZldHlOZXQgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gcGRmO1xuICAgICAgICAgICAgfTtcblxuXHQgICAgc2VsZi5nZW5lcmF0ZVBkZkZyb21FbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIG9yaWVudGF0aW9uLCB1bml0LCBmb3JtYXQpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGh0bWwyY2FudmFzKGVsZW1lbnQsIHtcbiAgICAgICAgICAgICAgICBvbnJlbmRlcmVkOiBmdW5jdGlvbiAoY2FudmFzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwZGYgPSBnZW5lcmF0ZVBkZkZyb21DYW52YXMoY2FudmFzLCBvcmllbnRhdGlvbiwgdW5pdCwgZm9ybWF0KTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShwZGYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcblx0ICAgIH07XG5cdH0sXG5cbiAgICAgICAgaW5zdCA9IG5ldyBQZGZQcmludGVyKCk7XG4gICAgXG5cdHJldHVybiBpbnN0O1xufV0pOyIsIi8qZ2xvYmFsIG5nUHJpbnQqL1xuXG5cbm5nUHJpbnQuZGlyZWN0aXZlKCduZ1ByaW50QnV0dG9uJywgWyckd2luZG93JywgJ3BkZlByaW50ZXInLCBmdW5jdGlvbiAoJHdpbmRvdywgcGRmUHJpbnRlcikge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICBcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0FDJyxcblx0XHRyZXF1aXJlOiAnXm5nUHJpbnRhYmxlJyxcblx0XHRzY29wZToge1xuXHRcdFx0cHJpbnRXaG9sZVBhZ2U6ICcmPycsXG4gICAgICAgICAgICBzYXZlQXM6ICdAPydcblx0XHR9LFxuXHRcdGxpbms6IGZ1bmN0aW9uICgkc2NvcGUsIGVsZW1lbnQsIGF0dHIsIG5nUHJpbnRhYmxlQ29udHJvbGxlcikge1xuXHRcdFx0dmFyIGdldENvbmZpZ0F0dHJpYnV0ZXMgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuXHRcdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRcdG9yaWVudGF0aW9uOiBlbGVtZW50WzBdLmF0dHJpYnV0ZXNbJ29yaWVudGF0aW9uJ10gPyBlbGVtZW50WzBdLmF0dHJpYnV0ZXNbJ29yaWVudGF0aW9uJ10udmFsdWUgOiAncCcsXG5cdFx0XHRcdFx0dW5pdDogZWxlbWVudFswXS5hdHRyaWJ1dGVzWyd1bml0J10gPyBlbGVtZW50WzBdLmF0dHJpYnV0ZXNbJ3VuaXQnXS52YWx1ZSA6ICdwdCcsXG5cdFx0XHRcdFx0Zm9ybWF0OiBlbGVtZW50WzBdLmF0dHJpYnV0ZXNbJ2Zvcm1hdCddID8gZWxlbWVudFswXS5hdHRyaWJ1dGVzWydmb3JtYXQnXS52YWx1ZSA6ICdhNCdcblx0XHRcdFx0fTtcblx0XHRcdH07XG5cblx0XHRcdCRzY29wZS5wcmludCA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0dmFyIGVsZW1lbnQ7XG5cblx0XHRcdFx0aWYgKCRzY29wZS5wcmludFdob2xlUGFnZSgpKSB7XG5cdFx0XHRcdFx0ZWxlbWVudCA9ICR3aW5kb3cuZG9jdW1lbnQuYm9keTtcblx0XHRcdFx0fSBlbHNlIGlmIChuZ1ByaW50YWJsZUNvbnRyb2xsZXIpIHtcblx0XHRcdFx0XHRlbGVtZW50ID0gbmdQcmludGFibGVDb250cm9sbGVyLmdldEVsZW1lbnQoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChlbGVtZW50KSB7XG5cdFx0XHRcdFx0dmFyIGNvbmZpZyA9IGdldENvbmZpZ0F0dHJpYnV0ZXMoZWxlbWVudCk7XG5cdFx0XHRcdFx0dmFyIHByb21pc2UgPSBwZGZQcmludGVyLmdlbmVyYXRlUGRmRnJvbUVsZW1lbnQoZWxlbWVudCwgY29uZmlnLm9yaWVudGF0aW9uLCBjb25maWcudW5pdCwgY29uZmlnLmZvcm1hdCk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHBkZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJHNjb3BlLnNhdmVBcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBkZi5zYXZlKCRzY29wZS5zYXZlQXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZGYub3V0cHV0KCdkYXRhdXJsbmV3d2luZG93Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHBkZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHRocm93IG5ldyBTeW50YXhFcnJvcignTm8gdGVtcGxhdGUgZWxlbWVudCBwcm92aWRlZC4gVHJ5IHVzaW5nIG5nUHJpbnRhYmxlIGRpcmVjdGl2ZS4nKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdFx0ZWxlbWVudC5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByaW50KCk7XG4gICAgICAgICAgICB9KTtcblx0XHR9XG5cdH07XG59XSk7IiwiLypnbG9iYWwgbmdQcmludCovXG5cbm5nUHJpbnQuZGlyZWN0aXZlKCduZ1ByaW50YWJsZScsIFtmdW5jdGlvbiAoKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIFxuXHRyZXR1cm4ge1xuXHRcdHJlc3RyaWN0OiAnQScsXG4gICAgICAgIHNjb3BlOiB7XG4gICAgICAgICAgICBvcmllbnRhdGlvbjogJ0A/JyxcbiAgICAgICAgICAgIHVuaXQ6ICdAPycsXG4gICAgICAgICAgICBmb3JtYXQ6ICdAPydcbiAgICAgICAgfSxcblx0XHRsaW5rOiBmdW5jdGlvbiAoJHNjb3BlLCBlbGVtZW50KSB7XG5cdFx0XHQkc2NvcGUuZWxlbWVudCA9IGVsZW1lbnQ7XG5cdFx0fSxcbiAgICAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCRzY29wZSkge1xuICAgICAgICAgICAgdGhpcy5nZXRFbGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkc2NvcGUuZWxlbWVudDtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9